{"application": "accengage", "id": "b6ed8213-6765-4f2d-b449-257948571eda", "index": 0, "keepWaitingPipelines": false, "lastModifiedBy": "mohamedanas.slim@airship.com", "limitConcurrent": true, "name": "PUSH01 Rolling restart OR replace", "parameterConfig": [{"default": "", "description": "do you want to apply action on staging or production environment", "hasOptions": true, "label": "Project", "name": "project", "options": [{"value": "accengage-dev"}, {"value": "accengage-bigdata"}], "pinned": true, "required": true}, {"default": "", "description": "name of instance", "hasOptions": true, "label": "Instance", "name": "instance", "options": [{"value": "accengage-push01-01"}, {"value": "accengage-push01-02"}, {"value": "accengage-push01-03"}], "pinned": true, "required": true}, {"default": "", "description": "nature of action: do you want to restart or replace the instance", "hasOptions": true, "label": "Action", "name": "action", "options": [{"value": "restart"}, {"value": "replace"}], "pinned": true, "required": true}], "schema": "1", "spelEvaluator": "v4", "stages": [{"account": "gcb-account", "application": "accengage", "buildDefinition": {"options": {"substitutionOption": "ALLOW_LOOSE"}, "steps": [{"args": ["compute", "instance-groups", "managed", "update-instances", "accengage-push01-ig", "--project=${parameters[\"project\"]}", "--instances=${parameters[\"instance\"]}", "--region=europe-west1", "--minimal-action=${parameters[\"action\"]}"], "id": "restart", "name": "gcr.io/cloud-builders/gcloud"}]}, "buildDefinitionSource": "text", "comments": "<ul>\n      <li><a target=\"_blank\"  href=\"https://console.cloud.google.com/compute/instanceGroups/details/europe-west1/accengage-push01-ig?project=accengage-bigdata\">Production Push01 Instance Group</a></li>\n      <li><a target=\"_blank\"  href=\"https://console.cloud.google.com/logs/query;query=resource.type%3D%22gce_instance%22%0Alabels.%22compute.googleapis.com%2Fresource_name%22:%22accengage-push01%22?project=accengage-bigdata\">Production Push01 Instance Group Logs</a></li>\n</ul>", "name": "Replace/Restart instance", "refId": "3", "requisiteStageRefIds": [], "type": "googleCloudBuild"}], "triggers": [], "updateTs": "1614853024386"}